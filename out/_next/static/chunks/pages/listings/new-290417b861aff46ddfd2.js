_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{Xv2N:function(t,e,n){"use strict";n.r(e);var a=n("o0o1"),r=n.n(a),s=n("HaE+"),i=n("1OyB"),o=n("vuIU"),c=n("Ji7U"),l=n("md7G"),u=n("foSv"),p=n("MX0m"),h=n.n(p),f=n("q1tI"),m=n.n(f),d=n("Lev9"),b=(n("YFqc"),n("CafY")),x=n("jZJi"),v=n("rePB"),j=n("JX7q"),g=n("iZ4v"),y=n.n(g),w=m.a.createElement;function N(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(u.a)(t);if(e){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var k=function(t){Object(c.a)(n,t);var e=N(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={title:"Breezy cabana in Baja California",description:"Breezy cabana in Baja California",price:1e4,location:"United States",currency:"USD"},a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a}return Object(o.a)(n,[{key:"handleChange",value:function(t){var e=t.target,n=e.name,a=e.value;this.setState(Object(v.a)({},n,a))}},{key:"handleSubmit",value:function(){var t=Object(s.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,x.a.makeRequest("post","/api/listings/new",this.state);case 4:return t.sent,t.abrupt("return",Object(d.a)("/dashboard/host"));case 8:t.prev=8,t.t0=t.catch(1),y.a.log("Signup failed.",t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return w(m.a.Fragment,null,w("div",{className:"jsx-164991117 listing-form"},w("form",{onSubmit:this.handleSubmit,className:"jsx-164991117"},w("div",{className:"jsx-164991117 form-group"},w("label",{htmlFor:"title",className:"jsx-164991117"},"Title"),w("input",{type:"text",id:"title",name:"title",placeholder:"Breezy cabana in Baja California",value:this.state.title,onChange:this.handleChange,className:"jsx-164991117 form-control"})),w("div",{className:"jsx-164991117 form-group"},w("label",{htmlFor:"description",className:"jsx-164991117"},"Description"),w("textarea",{id:"description",name:"description",placeholder:"Breezy cabana in Baja California",value:this.state.description,onChange:this.handleChange,className:"jsx-164991117 form-control"})),w("div",{className:"jsx-164991117 form-group"},w("label",{htmlFor:"price",className:"jsx-164991117"},"Price per night (in cents)"),w("input",{type:"text",id:"price",name:"price",placeholder:"10000 USD",value:this.state.price,onChange:this.handleChange,className:"jsx-164991117 form-control"})),w("div",{className:"jsx-164991117 form-group"},w("label",{htmlFor:"currency",className:"jsx-164991117"},"Currency"),w("select",{id:"currency",name:"currency",value:this.state.currency,onChange:this.handleChange,className:"jsx-164991117 form-control"},w("option",{className:"jsx-164991117"},"USD"),w("option",{className:"jsx-164991117"},"EUR"))),w("div",{className:"jsx-164991117 form-group"},w("label",{htmlFor:"location",className:"jsx-164991117"},"Location"),w("input",{type:"text",id:"location",name:"location",placeholder:"Mexico",value:this.state.location,onChange:this.handleChange,className:"jsx-164991117 form-control"})),w("button",{type:"submit",className:"jsx-164991117 btn-submit btn btn-primary"},"Create"),w("p",{className:"jsx-164991117 "+"error ".concat(this.state.error&&"show")},this.state.error&&"Error: ".concat(this.state.error)))),w(h.a,{id:"164991117"},[".listing-form.jsx-164991117{margin:0;padding:20px 0 0;}","label.jsx-164991117{font-weight:600;}","input.jsx-164991117{padding-left:12px;}",".error.jsx-164991117{margin:0.5rem 0 0;display:none;color:brown;}",".error.show.jsx-164991117{display:block;}",".btn-submit.jsx-164991117{margin-top:20px;}"]))}}]),n}(f.Component),C=n("mOvS"),O=n.n(C),S=m.a.createElement;function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(u.a)(t);if(e){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var B=function(t){Object(c.a)(n,t);var e=R(n);function n(t){return Object(i.a)(this,n),e.call(this)}return Object(o.a)(n,[{key:"render",value:function(){var t=O()().publicRuntimeConfig.isTestMode;return S(b.a,{isAuthenticated:this.props.isAuthenticated,userProfile:this.props.userProfile},S("div",{className:"jsx-1019485000 listing-new-page"},S("div",{className:"jsx-1019485000 splash-image"},S("div",{className:"jsx-1019485000 container"},S("div",{className:"jsx-1019485000 box popover"},S("h3",{className:"jsx-1019485000"},"Create new listing"),t&&S("p",{className:"jsx-1019485000"},"Creating new listings have been disabled as Kavholm runs in test-mode."),!t&&S(k,null)))),S(h.a,{id:"1019485000"},[".listing-new-page.jsx-1019485000{width:100%;position:absolute;top:110px;left:0;right:0;bottom:0;}",".splash-image.jsx-1019485000{background:linear-gradient( 0deg, rgba(255,255,255,0) 50%, #ffffff 100% ), url(https://images.unsplash.com/photo-1501004745788-4f4cb08ba8bc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2550&q=80) no-repeat;background-size:cover;}"])))}}],[{key:"getInitialProps",value:function(){var t=Object(s.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),n}(m.a.Component);e.default=B},eLSq:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings/new",function(){return n("Xv2N")}])},jZJi:function(t,e,n){"use strict";var a=n("o0o1"),r=n.n(a),s=n("HaE+"),i=n("1OyB"),o=n("vuIU"),c=n("vcXL"),l=n.n(c),u=n("iZ4v"),p=n.n(u),h=function(){function t(){Object(i.a)(this,t),this.token="",this.context=null,this.protocol="http:",this.port=null}return Object(o.a)(t,[{key:"setToken",value:function(t){p.a.log("APIclient.setToken",t),this.token=t}},{key:"setContext",value:function(t){p.a.log("APIclient.setContext"),this.context=t}},{key:"detectContext",value:function(){this.host=window.location.hostname,this.protocol=window.location.protocol,this.port=window.location.port}},{key:"makeRequest",value:function(){var t=Object(s.a)(r.a.mark((function t(e,n,a){var s,i,o,c,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.detectContext(),s=a||{},i=this.getBaseUrl(),o=i+n,p.a.log("APIclient.makeRequest.requestUrl",o,this.token),t.prev=5,t.next=8,l()(o,{credentials:"include",headers:{"content-type":"post"==e?"application/json":"",Authorization:this.token?"Bearer ".concat(this.token):""},method:e,body:"post"==e?JSON.stringify(s):null});case 8:if(!(c=t.sent).ok){t.next=15;break}return t.next=12,c.json();case 12:return t.abrupt("return",t.sent);case 15:return t.next=17,c.text();case 17:throw u=t.sent,p.a.log("APIclient.makeRequest.response.notOkay",c.statusText,u),new Error(c.statusText);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),p.a.log("APIclient.makeRequest.error",t.t0);case 25:case"end":return t.stop()}}),t,this,[[5,22]])})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"getBaseUrl",value:function(){return"".concat(this.protocol,"//").concat(this.host).concat(this.port?":"+this.port:"")}}]),t}();e.a=new h},vcXL:function(t,e,n){"use strict";var a=self.fetch.bind(self);t.exports=a,t.exports.default=t.exports}},[["eLSq",1,2,0,3,4]]]);