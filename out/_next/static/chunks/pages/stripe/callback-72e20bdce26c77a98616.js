_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{KDr6:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stripe/callback",function(){return n("Zr1w")}])},Zr1w:function(t,e,n){"use strict";n.r(e);var r=n("o0o1"),o=n.n(r),a=n("HaE+"),c=n("1OyB"),s=n("vuIU"),i=n("Ji7U"),u=n("md7G"),l=n("foSv"),p=n("MX0m"),f=n.n(p),h=n("q1tI"),v=n.n(h),d=n("20a2"),k=n.n(d),x=n("Lev9"),b=n("jZJi"),w=n("iZ4v"),y=n.n(w),m=n("CafY"),j=v.a.createElement;function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var O=function(t){Object(i.a)(n,t);var e=g(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"finalize",value:function(){var t=Object(a.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=k.a.router.query.code,y.a.log("code",e),t.prev=2,t.next=5,b.a.makeRequest("post","/api/payouts/setup",{code:e});case 5:if(!(n=t.sent)||"ok"!==n.status){t.next=10;break}return t.abrupt("return",Object(x.a)("/dashboard/host"));case 10:y.a.log("req",n);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),y.a.log("AuthStripeCallback.error",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.finalize()}},{key:"render",value:function(){return j(m.a,{isAuthenticated:this.props.isAuthenticated,userProfile:this.props.userProfile,title:"Dashboard"},j("div",{className:"jsx-1287337355 "},j("img",{src:"/static/loader.svg",className:"jsx-1287337355 loader"})),j(f.a,{id:"1287337355"},[".loader.jsx-1287337355{position:absolute;top:50%;left:50%;margin-left:-19px;margin-top:-19px;}"]))}}],[{key:"getInitialProps",value:function(){var t=Object(a.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),n}(v.a.Component);e.default=O},jZJi:function(t,e,n){"use strict";var r=n("o0o1"),o=n.n(r),a=n("HaE+"),c=n("1OyB"),s=n("vuIU"),i=n("vcXL"),u=n.n(i),l=n("iZ4v"),p=n.n(l),f=function(){function t(){Object(c.a)(this,t),this.token="",this.context=null,this.protocol="http:",this.port=null}return Object(s.a)(t,[{key:"setToken",value:function(t){p.a.log("APIclient.setToken",t),this.token=t}},{key:"setContext",value:function(t){p.a.log("APIclient.setContext"),this.context=t}},{key:"detectContext",value:function(){this.host=window.location.hostname,this.protocol=window.location.protocol,this.port=window.location.port}},{key:"makeRequest",value:function(){var t=Object(a.a)(o.a.mark((function t(e,n,r){var a,c,s,i,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.detectContext(),a=r||{},c=this.getBaseUrl(),s=c+n,p.a.log("APIclient.makeRequest.requestUrl",s,this.token),t.prev=5,t.next=8,u()(s,{credentials:"include",headers:{"content-type":"post"==e?"application/json":"",Authorization:this.token?"Bearer ".concat(this.token):""},method:e,body:"post"==e?JSON.stringify(a):null});case 8:if(!(i=t.sent).ok){t.next=15;break}return t.next=12,i.json();case 12:return t.abrupt("return",t.sent);case 15:return t.next=17,i.text();case 17:throw l=t.sent,p.a.log("APIclient.makeRequest.response.notOkay",i.statusText,l),new Error(i.statusText);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),p.a.log("APIclient.makeRequest.error",t.t0);case 25:case"end":return t.stop()}}),t,this,[[5,22]])})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getBaseUrl",value:function(){return"".concat(this.protocol,"//").concat(this.host).concat(this.port?":"+this.port:"")}}]),t}();e.a=new f},vcXL:function(t,e,n){"use strict";var r=self.fetch.bind(self);t.exports=r,t.exports.default=t.exports}},[["KDr6",1,2,0,3,4]]]);