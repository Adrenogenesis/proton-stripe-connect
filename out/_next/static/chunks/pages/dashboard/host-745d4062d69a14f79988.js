_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"3mip":function(t,e,a){"use strict";var s=a("o0o1"),n=a.n(s),r=a("HaE+"),i=a("1OyB"),o=a("vuIU"),c=a("Ji7U"),l=a("md7G"),p=a("foSv"),u=a("MX0m"),x=a.n(u),f=a("q1tI"),d=a.n(f),m=a("YFqc"),h=a.n(m),b=a("jZJi"),g=d.a.createElement;function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,s=Object(p.a)(t);if(e){var n=Object(p.a)(this).constructor;a=Reflect.construct(s,arguments,n)}else a=s.apply(this,arguments);return Object(l.a)(this,a)}}var v=function(t){Object(c.a)(a,t);var e=j(a);function a(){return Object(i.a)(this,a),e.call(this)}return Object(o.a)(a,[{key:"handleDashboardLink",value:function(){var t=Object(r.a)(n.a.mark((function t(){var e;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.makeRequest("get","/api/payouts/link");case 2:e=t.sent,window.open(e.url);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.profile,e=t?t.avatar:"/static/avatar.png",a="";if(this.props.balance&&this.props.balance){var s=(new Intl.NumberFormat).resolvedOptions().locale;a=new Intl.NumberFormat(s,{style:"currency",currency:this.props.balance.currency}).format(this.props.balance.amount/100)}return g("div",{className:"jsx-655458586 dashboard-header"},g("div",{className:"jsx-655458586 row"},g("div",{className:"jsx-655458586 col-4"},t&&g("div",{className:"jsx-655458586 media user-details"},g("img",{src:e,className:"jsx-655458586 mr-3 avatar"}),g("div",{className:"jsx-655458586 media-body"},g("div",{className:"jsx-655458586 user-details-body align-middle"},g("h5",{className:"jsx-655458586 mt-0"},t.firstName+" "+t.lastName),g("p",{className:"jsx-655458586 text-secondary"},t.email))))),g("div",{className:"jsx-655458586 col-4"},g("div",{className:"jsx-655458586 align-middle stripe-dashboard"},a&&g(d.a.Fragment,null,g("p",{className:"jsx-655458586 label text-secondary"},"Balance"," ",g("a",{href:"#",onClick:this.handleDashboardLink,className:"jsx-655458586"},"See Payouts \u2197")),g("p",{className:"jsx-655458586 balance"},a," "))))),g("div",{className:"jsx-655458586 row"},g("div",{className:"jsx-655458586 col-12"},g("ul",{className:"jsx-655458586 nav nav-tabs"},g("li",{className:"jsx-655458586 nav-item"},g(h.a,{href:"/dashboard"},g("a",{className:"jsx-655458586 "+("nav-link "+("renter"==this.props.dashboardType?"active":"")||!1)},"Your trips"))),g("li",{className:"jsx-655458586 nav-item"},g(h.a,{href:"/dashboard/host"},g("a",{className:"jsx-655458586 "+("nav-link "+("host"==this.props.dashboardType?"active":"")||!1)},"Your listings")))))),g(x.a,{id:"655458586"},[".dashboard-header.jsx-655458586{margin-bottom:20px;padding-bottom:0px;}",".nav-tabs.jsx-655458586{margin:20px 0;box-sizing:border-box;}",".nav-link.jsx-655458586{text-align:left;box-sizing:border-box;font-size:16px;font-weight:600;padding:0 8px 8px;margin-right:24px;color:#484848;}",".nav-link.jsx-655458586:hover{border:1px solid #fff;}",".nav-link.active.jsx-655458586{border:#fff;border-bottom:2px solid #007bff;padding-top:1px;color:#0055ff;}",".user-details.jsx-655458586 .avatar.jsx-655458586{height:60px;width:60px;border-radius:60px;object-fit:cover;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",".user-details.jsx-655458586{font-size:14px;padding-bottom:12px;}",".user-details-body.jsx-655458586{padding-top:10px;}",".user-details.jsx-655458586 h5.jsx-655458586{font-size:24px;margin:0;font-weight:600;}",".user-details.jsx-655458586 p.jsx-655458586{font-size:14px;margin:0;-webkit-transform:translateY(-4px);-ms-transform:translateY(-4px);transform:translateY(-4px);margin-top:4px;}",".stripe-dashboard.jsx-655458586{font-size:12px;padding-top:4px;}",".stripe-dashboard.jsx-655458586 .label.jsx-655458586{font-size:14px;margin:0;padding:0;}",".stripe-dashboard.jsx-655458586 .balance.jsx-655458586{margin:0;padding:0;font-size:22px;line-height:1;font-weight:600;}",".stripe-dashboard.jsx-655458586 a.jsx-655458586{font-weight:500;padding-left:6px;}",".stripe-dashboard.jsx-655458586 a.jsx-655458586:hover{-webkit-text-decoration:none;text-decoration:none;}"]))}}]),a}(f.Component);e.a=v},"3yVq":function(t,e,a){"use strict";var s=a("KQm4"),n=a("MX0m"),r=a.n(n),i=a("q1tI"),o=a.n(i),c=a("YFqc"),l=a.n(c),p=o.a.createElement;e.a=function(t){var e=t.list?Object(s.a)(t.list):[];if(e.length<4)for(;e.length<4;)e.push({id:Math.random()});var a=[];return e&&(a=e.map((function(t){return p("li",{key:t.id,className:"jsx-2800196792 listing-item"},p("div",{className:"jsx-2800196792 clip"},t.title&&p(l.a,{href:"/listings/"+t.id},p("a",{className:"jsx-2800196792"},p("img",{src:t.image,className:"jsx-2800196792"}),p("div",{className:"jsx-2800196792 overlay"}),p("h2",{className:"jsx-2800196792"},t.location),p("h3",{className:"jsx-2800196792"},t.title)))),p(r.a,{id:"2800196792"},[".listing-item.jsx-2800196792{height:233px;border:0;background:#f6f6f6;position:relative;}",".clip.jsx-2800196792{position:absolute;height:100%;width:100%;overflow:hidden;}",".listing-item.jsx-2800196792 img.jsx-2800196792{width:100%;height:100%;object-fit:cover;object-position:bottom;border:0;position:absolute;}",".overlay.jsx-2800196792{position:absolute;width:100%;height:100%;background-image:linear-gradient( to bottom, rgba(0,0,0,0), rgba(0,0,0,0), rgba(0,0,0,0.1), rgba(0,0,0,0.3), rgba(0,0,0,0.65) );}",".listing-item.jsx-2800196792:hover img.jsx-2800196792{-webkit-filter:brightness(1.02);filter:brightness(1.02);-webkit-transform:scale(1.02);-ms-transform:scale(1.02);transform:scale(1.02);-webkit-transition:all 200ms ease-out;transition:all 200ms ease-out;}",".listing-item.jsx-2800196792:hover h2.jsx-2800196792{color:#fff;-webkit-transition:all 200ms ease;transition:all 200ms ease;}",".listing-item.jsx-2800196792:hover h3.jsx-2800196792{color:#fff;-webkit-transition:all 200ms ease;transition:all 200ms ease;}",".listing-item.jsx-2800196792 h2.jsx-2800196792{font-size:10px;font-weight:800;color:#ddd;width:100%;margin:12px 0 0;text-transform:uppercase;position:absolute;bottom:40px;left:16px;z-index:2;}",".listing-item.jsx-2800196792 h3.jsx-2800196792{font-size:16px;font-weight:500;color:#fff;width:100%;margin:4px 0;position:absolute;bottom:12px;left:16px;z-index:2;}"]))}))),p("ul",{className:"jsx-3093019596 listings-list"},a,p(r.a,{id:"3093019596"},[".listings-list.jsx-3093019596{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(1,1fr);grid-gap:24px 24px;grid-auto-rows:minmax(100px,auto);}","@media (min-width:768px){.listings-list.jsx-3093019596{grid-template-columns:repeat(2,1fr);}}","@media (min-width:992px){.listings-list.jsx-3093019596{grid-template-columns:repeat(3,1fr);}}"]))}},"GXd/":function(t,e,a){"use strict";var s=a("MX0m"),n=a.n(s),r=a("q1tI"),i=a.n(r),o=a("YFqc"),c=a.n(o),l=i.a.createElement;e.a=function(t){var e=i.a.createRef();return l("div",{className:"jsx-627653325 new-button"},t.showTip&&l("div",{className:"jsx-627653325 overlay"},l("span",{className:"jsx-627653325 triangle"},"\u25b2"),l("strong",{className:"jsx-627653325"},t.tipTitle),l("br",{className:"jsx-627653325"}),t.tipBody),l(c.a,{href:t.link},l("a",{ref:e,className:"jsx-627653325 btn btn-primary btn-new"},"+ ",t.label)),l(n.a,{id:"627653325"},[".new-button.jsx-627653325{position:relative;}",".overlay.jsx-627653325 .triangle.jsx-627653325{position:absolute;top:-16px;right:28px;color:#000;-webkit-transform:scaleY(0.7);-ms-transform:scaleY(0.7);transform:scaleY(0.7);font-size:24px;}",".overlay.jsx-627653325{position:absolute;right:0;top:40px;background:#000;font-size:17px;line-height:23px;color:#fff;padding:20px;border-radius:10px;width:400px;z-index:10;box-shadow:0 18px 36px 0 rgba(0,0,0,0.15);-webkit-animation:wiggle-jsx-627653325 1s infinite;animation:wiggle-jsx-627653325 1s infinite;-webkit-animation-direction:alternate;animation-direction:alternate;}",".overlay.jsx-627653325 strong.jsx-627653325{font-size:20px;line-height:28px;margin-bottom:2px;display:inline-block;}",".btn-new.jsx-627653325{float:right;margin-top:-8px;}","@-webkit-keyframes wiggle-jsx-627653325{from{-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}to{-webkit-transform:translateY(4px);-ms-transform:translateY(4px);transform:translateY(4px);}}","@keyframes wiggle-jsx-627653325{from{-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}to{-webkit-transform:translateY(4px);-ms-transform:translateY(4px);transform:translateY(4px);}}"]))}},Gygy:function(t,e,a){"use strict";var s=a("o0o1"),n=a.n(s),r=a("HaE+"),i=a("1OyB"),o=a("vuIU"),c=a("JX7q"),l=a("Ji7U"),p=a("md7G"),u=a("foSv"),x=a("MX0m"),f=a.n(x),d=a("q1tI"),m=a.n(d),h=a("jZJi"),b=a("iZ4v"),g=a.n(b),j=m.a.createElement;function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,s=Object(u.a)(t);if(e){var n=Object(u.a)(this).constructor;a=Reflect.construct(s,arguments,n)}else a=s.apply(this,arguments);return Object(p.a)(this,a)}}var w=function(t){Object(l.a)(a,t);var e=v(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleConnect=s.handleConnect.bind(Object(c.a)(s)),s}return Object(o.a)(a,[{key:"getRedirectInfo",value:function(){var t=Object(r.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h.a.makeRequest("post","/api/payouts/stripe"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"handleConnect",value:function(){var t=Object(r.a)(n.a.mark((function t(){var e,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.a.log("ProfileStripe.handleConnect"),t.next=3,this.getRedirectInfo();case 3:e=t.sent,(a=e.location)&&(window.location.href=a);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return j(m.a.Fragment,null,j("div",{className:"jsx-820269059 text-center box"},j("img",{src:"/static/icon-bank.svg",className:"jsx-820269059 icon"}),j("h3",{className:"jsx-820269059"},"Set up payouts to list on Kavholm"),j("p",{className:"jsx-820269059"},"Kavholm partners with Stripe to transfer earnings to your bank account."),j("a",{onClick:this.handleConnect,href:"#",className:"jsx-820269059 btn btn-primary text-center"},"Set up payouts"),j("p",{className:"jsx-820269059 text-center notice"},"You'll be redirected to Stripe to complete the onboarding proces.")),j(f.a,{id:"820269059"},[".icon.jsx-820269059{margin-bottom:30px;height:32px;}",".box.jsx-820269059{max-width:300px;max-height:400px;}","h3.jsx-820269059{font-weight:600;}","p.jsx-820269059{line-height:22px;}",".box.jsx-820269059 .btn.jsx-820269059{width:100%;margin-bottom:20px;margin-top:16px;}",".box.jsx-820269059 .notice.jsx-820269059{font-size:12px;line-height:1.5;}",".box.jsx-820269059 h3.jsx-820269059{margin-bottom:20px;}"]))}}]),a}(d.Component);e.a=w},KQm4:function(t,e,a){"use strict";function s(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(e,"a",(function(){return s}))},jZJi:function(t,e,a){"use strict";var s=a("o0o1"),n=a.n(s),r=a("HaE+"),i=a("1OyB"),o=a("vuIU"),c=a("vcXL"),l=a.n(c),p=a("iZ4v"),u=a.n(p),x=function(){function t(){Object(i.a)(this,t),this.token="",this.context=null,this.protocol="http:",this.port=null}return Object(o.a)(t,[{key:"setToken",value:function(t){u.a.log("APIclient.setToken",t),this.token=t}},{key:"setContext",value:function(t){u.a.log("APIclient.setContext"),this.context=t}},{key:"detectContext",value:function(){this.host=window.location.hostname,this.protocol=window.location.protocol,this.port=window.location.port}},{key:"makeRequest",value:function(){var t=Object(r.a)(n.a.mark((function t(e,a,s){var r,i,o,c,p;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.detectContext(),r=s||{},i=this.getBaseUrl(),o=i+a,u.a.log("APIclient.makeRequest.requestUrl",o,this.token),t.prev=5,t.next=8,l()(o,{credentials:"include",headers:{"content-type":"post"==e?"application/json":"",Authorization:this.token?"Bearer ".concat(this.token):""},method:e,body:"post"==e?JSON.stringify(r):null});case 8:if(!(c=t.sent).ok){t.next=15;break}return t.next=12,c.json();case 12:return t.abrupt("return",t.sent);case 15:return t.next=17,c.text();case 17:throw p=t.sent,u.a.log("APIclient.makeRequest.response.notOkay",c.statusText,p),new Error(c.statusText);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),u.a.log("APIclient.makeRequest.error",t.t0);case 25:case"end":return t.stop()}}),t,this,[[5,22]])})));return function(e,a,s){return t.apply(this,arguments)}}()},{key:"getBaseUrl",value:function(){return"".concat(this.protocol,"//").concat(this.host).concat(this.port?":"+this.port:"")}}]),t}();e.a=new x},qZKn:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),n=a.n(s),r=a("HaE+"),i=a("1OyB"),o=a("vuIU"),c=a("Ji7U"),l=a("md7G"),p=a("foSv"),u=a("MX0m"),x=a.n(u),f=a("q1tI"),d=a.n(f),m=a("Lev9"),h=a("CafY"),b=a("jZJi"),g=a("3yVq"),j=a("3mip"),v=a("GXd/"),w=a("Gygy"),y=d.a.createElement;function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,s=Object(p.a)(t);if(e){var n=Object(p.a)(this).constructor;a=Reflect.construct(s,arguments,n)}else a=s.apply(this,arguments);return Object(l.a)(this,a)}}var N=function(t){Object(c.a)(a,t);var e=k(a);function a(t){return Object(i.a)(this,a),e.call(this)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.isAuthenticated||Object(m.a)("/login")}},{key:"render",value:function(){var t=this.props.userListings&&0===this.props.userListings.length,e=this.props.userProfile&&null!=this.props.userProfile.stripe&&this.props.userProfile.stripe.stripeUserId;return y(h.a,{isAuthenticated:this.props.isAuthenticated,userProfile:this.props.userProfile,title:"Dashboard"},y("div",{className:"jsx-4210346287 dashboard "},y(j.a,{profile:this.props.profile,balance:this.props.userBalance,dashboardType:this.props.dashboardType}),y("div",{className:"jsx-4210346287 row"},e?y("div",{className:"jsx-4210346287 col-12"},y("div",{className:"jsx-4210346287 row"},y("div",{className:"jsx-4210346287 col-8"},y("div",{className:"jsx-4210346287 clearfix"},y("h4",{className:"jsx-4210346287"},"Your listings"))),y("div",{className:"jsx-4210346287 col-4"},y(v.a,{showTip:t,label:"New listing",link:"/listings/new",tipTitle:"Time to create your first listing.",tipBody:"You can now add your home to Kavholm"}))),this.props.userListings&&y(g.a,{list:this.props.userListings})):y("div",{className:"jsx-4210346287 wrapper"},y(w.a,null)))),y(x.a,{id:"4210346287"},[".dashboard.jsx-4210346287{padding-bottom:100px;}",".dashboard.jsx-4210346287 h4.jsx-4210346287{font-size:24px;font-weight:bold;margin-bottom:30px;}",".wrapper.jsx-4210346287{width:100%;height:600px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]))}}],[{key:"getInitialProps",value:function(){var t=Object(r.a)(n.a.mark((function t(e){var a,s,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.makeRequest("get","/api/profile");case 2:return a=t.sent,t.next=5,b.a.makeRequest("get","/api/profile/listings");case 5:return s=t.sent,t.next=8,b.a.makeRequest("get","/api/profile/balance");case 8:return r=t.sent,t.abrupt("return",{profile:a,userListings:s,userBalance:r,dashboardType:"host"});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),a}(d.a.Component);e.default=N},uPo7:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/host",function(){return a("qZKn")}])},vcXL:function(t,e,a){"use strict";var s=self.fetch.bind(self);t.exports=s,t.exports.default=t.exports}},[["uPo7",1,2,0,3,4]]]);