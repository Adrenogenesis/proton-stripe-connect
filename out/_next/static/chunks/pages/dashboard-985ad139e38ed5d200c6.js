_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"3mip":function(t,e,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("HaE+"),i=a("1OyB"),o=a("vuIU"),c=a("Ji7U"),l=a("md7G"),p=a("foSv"),u=a("MX0m"),f=a.n(u),d=a("q1tI"),x=a.n(d),m=a("YFqc"),h=a.n(m),b=a("jZJi"),g=x.a.createElement;function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=Object(p.a)(t);if(e){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var v=function(t){Object(c.a)(a,t);var e=j(a);function a(){return Object(i.a)(this,a),e.call(this)}return Object(o.a)(a,[{key:"handleDashboardLink",value:function(){var t=Object(s.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.makeRequest("get","/api/payouts/link");case 2:e=t.sent,window.open(e.url);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.profile,e=t?t.avatar:"/static/avatar.png",a="";if(this.props.balance&&this.props.balance){var n=(new Intl.NumberFormat).resolvedOptions().locale;a=new Intl.NumberFormat(n,{style:"currency",currency:this.props.balance.currency}).format(this.props.balance.amount/100)}return g("div",{className:"jsx-655458586 dashboard-header"},g("div",{className:"jsx-655458586 row"},g("div",{className:"jsx-655458586 col-4"},t&&g("div",{className:"jsx-655458586 media user-details"},g("img",{src:e,className:"jsx-655458586 mr-3 avatar"}),g("div",{className:"jsx-655458586 media-body"},g("div",{className:"jsx-655458586 user-details-body align-middle"},g("h5",{className:"jsx-655458586 mt-0"},t.firstName+" "+t.lastName),g("p",{className:"jsx-655458586 text-secondary"},t.email))))),g("div",{className:"jsx-655458586 col-4"},g("div",{className:"jsx-655458586 align-middle stripe-dashboard"},a&&g(x.a.Fragment,null,g("p",{className:"jsx-655458586 label text-secondary"},"Balance"," ",g("a",{href:"#",onClick:this.handleDashboardLink,className:"jsx-655458586"},"See Payouts \u2197")),g("p",{className:"jsx-655458586 balance"},a," "))))),g("div",{className:"jsx-655458586 row"},g("div",{className:"jsx-655458586 col-12"},g("ul",{className:"jsx-655458586 nav nav-tabs"},g("li",{className:"jsx-655458586 nav-item"},g(h.a,{href:"/dashboard"},g("a",{className:"jsx-655458586 "+("nav-link "+("renter"==this.props.dashboardType?"active":"")||!1)},"Your trips"))),g("li",{className:"jsx-655458586 nav-item"},g(h.a,{href:"/dashboard/host"},g("a",{className:"jsx-655458586 "+("nav-link "+("host"==this.props.dashboardType?"active":"")||!1)},"Your listings")))))),g(f.a,{id:"655458586"},[".dashboard-header.jsx-655458586{margin-bottom:20px;padding-bottom:0px;}",".nav-tabs.jsx-655458586{margin:20px 0;box-sizing:border-box;}",".nav-link.jsx-655458586{text-align:left;box-sizing:border-box;font-size:16px;font-weight:600;padding:0 8px 8px;margin-right:24px;color:#484848;}",".nav-link.jsx-655458586:hover{border:1px solid #fff;}",".nav-link.active.jsx-655458586{border:#fff;border-bottom:2px solid #007bff;padding-top:1px;color:#0055ff;}",".user-details.jsx-655458586 .avatar.jsx-655458586{height:60px;width:60px;border-radius:60px;object-fit:cover;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",".user-details.jsx-655458586{font-size:14px;padding-bottom:12px;}",".user-details-body.jsx-655458586{padding-top:10px;}",".user-details.jsx-655458586 h5.jsx-655458586{font-size:24px;margin:0;font-weight:600;}",".user-details.jsx-655458586 p.jsx-655458586{font-size:14px;margin:0;-webkit-transform:translateY(-4px);-ms-transform:translateY(-4px);transform:translateY(-4px);margin-top:4px;}",".stripe-dashboard.jsx-655458586{font-size:12px;padding-top:4px;}",".stripe-dashboard.jsx-655458586 .label.jsx-655458586{font-size:14px;margin:0;padding:0;}",".stripe-dashboard.jsx-655458586 .balance.jsx-655458586{margin:0;padding:0;font-size:22px;line-height:1;font-weight:600;}",".stripe-dashboard.jsx-655458586 a.jsx-655458586{font-weight:500;padding-left:6px;}",".stripe-dashboard.jsx-655458586 a.jsx-655458586:hover{-webkit-text-decoration:none;text-decoration:none;}"]))}}]),a}(d.Component);e.a=v},"5Uns":function(t,e,a){"use strict";a.r(e);var n=a("o0o1"),r=a.n(n),s=a("rePB"),i=a("HaE+"),o=a("1OyB"),c=a("vuIU"),l=a("Ji7U"),p=a("md7G"),u=a("foSv"),f=a("MX0m"),d=a.n(f),x=a("q1tI"),m=a.n(x),h=a("Lev9"),b=a("CafY"),g=a("jZJi"),j=a("KQm4"),v=a("YFqc"),w=a.n(v),y=m.a.createElement;var k=function(t){var e=t.list?Object(j.a)(t.list):[];if(e.length<6)for(;e.length<6;)e.push({id:Math.random()});var a=[];return e&&(a=e.map((function(t){return y("li",{key:t.id,className:"jsx-2928709024 listing-item"},t.listing&&y(w.a,{href:"/transactions/"+t.id},y("a",{className:"jsx-2928709024"},y("h4",{className:"jsx-2928709024"},t.location),y("h3",{className:"jsx-2928709024"},t.listing.title),y("img",{src:t.listing.image,className:"jsx-2928709024"}))),y(d.a,{id:"2928709024"},[".listing-item.jsx-2928709024{height:325px;position:relative;border:0;background:#f6f6f6;border-radius:4px;}",".listing-item.jsx-2928709024 h3.jsx-2928709024{position:absolute;bottom:20px;left:20px;z-index:2;margin:0;padding:0;color:#fff;font-size:16px;max-width:50%;}",".listing-item.jsx-2928709024 h4.jsx-2928709024{position:absolute;bottom:60px;left:20px;z-index:2;margin:0;padding:0;color:#fff;font-size:12px;max-width:50%;}",".listing-item.jsx-2928709024 img.jsx-2928709024{width:100%;height:100%;object-fit:cover;object-position:bottom;border:0;-webkit-filter:brightness(0.6);filter:brightness(0.6);border-radius:6px;}"]))}))),y("ul",{className:"jsx-2039588966 bookings-list"},a,y(d.a,{id:"2039588966"},[".bookings-list.jsx-2039588966{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(1,1fr);grid-gap:30px;grid-auto-rows:minmax(100px,auto);}","@media (min-width:768px){.bookings-list.jsx-2039588966{grid-template-columns:repeat(2,1fr);}}","@media (min-width:992px){.bookings-list.jsx-2039588966{grid-template-columns:repeat(3,1fr);}}"]))},N=a("3mip"),O=a("GXd/"),Y=m.a.createElement;function P(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?P(Object(a),!0).forEach((function(e){Object(s.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=Object(u.a)(t);if(e){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(p.a)(this,a)}}var T=function(t){Object(l.a)(a,t);var e=R(a);function a(t){return Object(o.a)(this,a),e.call(this)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.isAuthenticated||Object(h.a)("/login")}},{key:"render",value:function(){var t=this.props.userBookings&&0===this.props.userBookings.length;return Y(b.a,{isAuthenticated:this.props.isAuthenticated,userProfile:this.props.userProfile,title:"Dashboard"},Y("div",{className:"jsx-147629452 dashboard"},Y(N.a,{profile:this.props.profile,dashboardType:this.props.dashboardType}),Y("div",{className:"jsx-147629452 row"},Y("div",{className:"jsx-147629452 col-12"},Y("div",{className:"jsx-147629452 row"},Y("div",{className:"jsx-147629452 col-8"},Y("div",{className:"jsx-147629452 clearfix"},Y("h4",{className:"jsx-147629452"},"Your trips"))),Y("div",{className:"jsx-147629452 col-4"},Y(O.a,{showTip:t,label:"Show homes",link:"/listings",tipTitle:"No trips booked yet?",tipBody:"Explore the homes in Kavholm's marketplace"}))),Y(k,{list:this.props.userBookings})))),Y(d.a,{id:"147629452"},[".dashboard.jsx-147629452 h4.jsx-147629452{font-size:24px;font-weight:bold;margin-bottom:30px;}"]))}}],[{key:"getInitialProps",value:function(){var t=Object(i.a)(r.a.mark((function t(e){var a,n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.makeRequest("get","/api/profile");case 2:return a=t.sent,t.next=5,g.a.makeRequest("get","/api/transactions");case 5:if(!(n=t.sent)||!n.length){t.next=13;break}return t.next=9,n.map(function(){var t=Object(i.a)(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.makeRequest("get","/api/listings/".concat(e.listingId));case 2:return a=t.sent,t.abrupt("return",z(z({},e),{},{listing:a}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:return s=t.sent,t.next=12,Promise.all(s);case 12:n=t.sent;case 13:return t.abrupt("return",{profile:a,userBookings:n,dashboardType:"renter"});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),a}(m.a.Component);e.default=T},"GXd/":function(t,e,a){"use strict";var n=a("MX0m"),r=a.n(n),s=a("q1tI"),i=a.n(s),o=a("YFqc"),c=a.n(o),l=i.a.createElement;e.a=function(t){var e=i.a.createRef();return l("div",{className:"jsx-627653325 new-button"},t.showTip&&l("div",{className:"jsx-627653325 overlay"},l("span",{className:"jsx-627653325 triangle"},"\u25b2"),l("strong",{className:"jsx-627653325"},t.tipTitle),l("br",{className:"jsx-627653325"}),t.tipBody),l(c.a,{href:t.link},l("a",{ref:e,className:"jsx-627653325 btn btn-primary btn-new"},"+ ",t.label)),l(r.a,{id:"627653325"},[".new-button.jsx-627653325{position:relative;}",".overlay.jsx-627653325 .triangle.jsx-627653325{position:absolute;top:-16px;right:28px;color:#000;-webkit-transform:scaleY(0.7);-ms-transform:scaleY(0.7);transform:scaleY(0.7);font-size:24px;}",".overlay.jsx-627653325{position:absolute;right:0;top:40px;background:#000;font-size:17px;line-height:23px;color:#fff;padding:20px;border-radius:10px;width:400px;z-index:10;box-shadow:0 18px 36px 0 rgba(0,0,0,0.15);-webkit-animation:wiggle-jsx-627653325 1s infinite;animation:wiggle-jsx-627653325 1s infinite;-webkit-animation-direction:alternate;animation-direction:alternate;}",".overlay.jsx-627653325 strong.jsx-627653325{font-size:20px;line-height:28px;margin-bottom:2px;display:inline-block;}",".btn-new.jsx-627653325{float:right;margin-top:-8px;}","@-webkit-keyframes wiggle-jsx-627653325{from{-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}to{-webkit-transform:translateY(4px);-ms-transform:translateY(4px);transform:translateY(4px);}}","@keyframes wiggle-jsx-627653325{from{-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}to{-webkit-transform:translateY(4px);-ms-transform:translateY(4px);transform:translateY(4px);}}"]))}},KQm4:function(t,e,a){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(e,"a",(function(){return n}))},TUfB:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a("5Uns")}])},jZJi:function(t,e,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("HaE+"),i=a("1OyB"),o=a("vuIU"),c=a("vcXL"),l=a.n(c),p=a("iZ4v"),u=a.n(p),f=function(){function t(){Object(i.a)(this,t),this.token="",this.context=null,this.protocol="http:",this.port=null}return Object(o.a)(t,[{key:"setToken",value:function(t){u.a.log("APIclient.setToken",t),this.token=t}},{key:"setContext",value:function(t){u.a.log("APIclient.setContext"),this.context=t}},{key:"detectContext",value:function(){this.host=window.location.hostname,this.protocol=window.location.protocol,this.port=window.location.port}},{key:"makeRequest",value:function(){var t=Object(s.a)(r.a.mark((function t(e,a,n){var s,i,o,c,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.detectContext(),s=n||{},i=this.getBaseUrl(),o=i+a,u.a.log("APIclient.makeRequest.requestUrl",o,this.token),t.prev=5,t.next=8,l()(o,{credentials:"include",headers:{"content-type":"post"==e?"application/json":"",Authorization:this.token?"Bearer ".concat(this.token):""},method:e,body:"post"==e?JSON.stringify(s):null});case 8:if(!(c=t.sent).ok){t.next=15;break}return t.next=12,c.json();case 12:return t.abrupt("return",t.sent);case 15:return t.next=17,c.text();case 17:throw p=t.sent,u.a.log("APIclient.makeRequest.response.notOkay",c.statusText,p),new Error(c.statusText);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),u.a.log("APIclient.makeRequest.error",t.t0);case 25:case"end":return t.stop()}}),t,this,[[5,22]])})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"getBaseUrl",value:function(){return"".concat(this.protocol,"//").concat(this.host).concat(this.port?":"+this.port:"")}}]),t}();e.a=new f},vcXL:function(t,e,a){"use strict";var n=self.fetch.bind(self);t.exports=n,t.exports.default=t.exports}},[["TUfB",1,2,0,3,4]]]);