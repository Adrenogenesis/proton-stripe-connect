_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{"3mip":function(t,e,a){"use strict";var n=a("o0o1"),s=a.n(n),r=a("HaE+"),o=a("1OyB"),i=a("vuIU"),c=a("Ji7U"),l=a("md7G"),u=a("foSv"),p=a("MX0m"),d=a.n(p),f=a("q1tI"),x=a.n(f),h=a("YFqc"),m=a.n(h),b=a("jZJi"),j=x.a.createElement;function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=Object(u.a)(t);if(e){var s=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var g=function(t){Object(c.a)(a,t);var e=v(a);function a(){return Object(o.a)(this,a),e.call(this)}return Object(i.a)(a,[{key:"handleDashboardLink",value:function(){var t=Object(r.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.makeRequest("get","/api/payouts/link");case 2:e=t.sent,window.open(e.url);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.profile,e=t?t.avatar:"/static/avatar.png",a="";if(this.props.balance&&this.props.balance){var n=(new Intl.NumberFormat).resolvedOptions().locale;a=new Intl.NumberFormat(n,{style:"currency",currency:this.props.balance.currency}).format(this.props.balance.amount/100)}return j("div",{className:"jsx-655458586 dashboard-header"},j("div",{className:"jsx-655458586 row"},j("div",{className:"jsx-655458586 col-4"},t&&j("div",{className:"jsx-655458586 media user-details"},j("img",{src:e,className:"jsx-655458586 mr-3 avatar"}),j("div",{className:"jsx-655458586 media-body"},j("div",{className:"jsx-655458586 user-details-body align-middle"},j("h5",{className:"jsx-655458586 mt-0"},t.firstName+" "+t.lastName),j("p",{className:"jsx-655458586 text-secondary"},t.email))))),j("div",{className:"jsx-655458586 col-4"},j("div",{className:"jsx-655458586 align-middle stripe-dashboard"},a&&j(x.a.Fragment,null,j("p",{className:"jsx-655458586 label text-secondary"},"Balance"," ",j("a",{href:"#",onClick:this.handleDashboardLink,className:"jsx-655458586"},"See Payouts \u2197")),j("p",{className:"jsx-655458586 balance"},a," "))))),j("div",{className:"jsx-655458586 row"},j("div",{className:"jsx-655458586 col-12"},j("ul",{className:"jsx-655458586 nav nav-tabs"},j("li",{className:"jsx-655458586 nav-item"},j(m.a,{href:"/dashboard"},j("a",{className:"jsx-655458586 "+("nav-link "+("renter"==this.props.dashboardType?"active":"")||!1)},"Your trips"))),j("li",{className:"jsx-655458586 nav-item"},j(m.a,{href:"/dashboard/host"},j("a",{className:"jsx-655458586 "+("nav-link "+("host"==this.props.dashboardType?"active":"")||!1)},"Your listings")))))),j(d.a,{id:"655458586"},[".dashboard-header.jsx-655458586{margin-bottom:20px;padding-bottom:0px;}",".nav-tabs.jsx-655458586{margin:20px 0;box-sizing:border-box;}",".nav-link.jsx-655458586{text-align:left;box-sizing:border-box;font-size:16px;font-weight:600;padding:0 8px 8px;margin-right:24px;color:#484848;}",".nav-link.jsx-655458586:hover{border:1px solid #fff;}",".nav-link.active.jsx-655458586{border:#fff;border-bottom:2px solid #007bff;padding-top:1px;color:#0055ff;}",".user-details.jsx-655458586 .avatar.jsx-655458586{height:60px;width:60px;border-radius:60px;object-fit:cover;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",".user-details.jsx-655458586{font-size:14px;padding-bottom:12px;}",".user-details-body.jsx-655458586{padding-top:10px;}",".user-details.jsx-655458586 h5.jsx-655458586{font-size:24px;margin:0;font-weight:600;}",".user-details.jsx-655458586 p.jsx-655458586{font-size:14px;margin:0;-webkit-transform:translateY(-4px);-ms-transform:translateY(-4px);transform:translateY(-4px);margin-top:4px;}",".stripe-dashboard.jsx-655458586{font-size:12px;padding-top:4px;}",".stripe-dashboard.jsx-655458586 .label.jsx-655458586{font-size:14px;margin:0;padding:0;}",".stripe-dashboard.jsx-655458586 .balance.jsx-655458586{margin:0;padding:0;font-size:22px;line-height:1;font-weight:600;}",".stripe-dashboard.jsx-655458586 a.jsx-655458586{font-weight:500;padding-left:6px;}",".stripe-dashboard.jsx-655458586 a.jsx-655458586:hover{-webkit-text-decoration:none;text-decoration:none;}"]))}}]),a}(f.Component);e.a=g},"8QMV":function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return a("dmPs")}])},dmPs:function(t,e,a){"use strict";a.r(e);var n=a("o0o1"),s=a.n(n),r=a("HaE+"),o=a("1OyB"),i=a("vuIU"),c=a("JX7q"),l=a("Ji7U"),u=a("md7G"),p=a("foSv"),d=a("rePB"),f=a("MX0m"),x=a.n(f),h=a("q1tI"),m=a.n(h),b=a("Lev9"),j=a("CafY"),v=a("jZJi"),g=(a("3mip"),m.a.createElement);function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=Object(p.a)(t);if(e){var s=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var y=function(t){Object(l.a)(a,t);var e=k(a);function a(t){var n;return Object(o.a)(this,a),n=e.call(this),Object(d.a)(Object(c.a)(n),"disconnectStripeAccount",Object(r.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.makeRequest("post","/api/profile/disconnect_stripe");case 2:t.sent,Object(b.a)("/dashboard");case 4:case"end":return t.stop()}}),t)})))),Object(d.a)(Object(c.a)(n),"clearTransactions",Object(r.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.makeRequest("post","/api/profile/clear_transactions");case 2:t.sent,Object(b.a)("/dashboard");case 4:case"end":return t.stop()}}),t)})))),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.isAuthenticated||Object(b.a)("/login")}},{key:"render",value:function(){var t=this.props?this.props.profile:{};t&&t.avatar;return g(j.a,{isAuthenticated:this.props.isAuthenticated,userProfile:this.props.userProfile,title:"Profile"},g("div",{className:"jsx-3443765449 profile"},g("h4",{className:"jsx-3443765449"},"Your profile details"),g("pre",{className:"jsx-3443765449 profile-details bg-light"},g("code",{className:"jsx-3443765449"},JSON.stringify(t,null,2))),g("h4",{className:"jsx-3443765449"},"Admin"),g("button",{onClick:this.clearTransactions,className:"jsx-3443765449 btn btn-secondary"},"Clear trips"),t.stripe&&g(m.a.Fragment,null,g("br",{className:"jsx-3443765449"}),g("br",{className:"jsx-3443765449"}),g("button",{onClick:this.disconnectStripeAccount,className:"jsx-3443765449 btn btn-secondary"},"Disconnect Stripe account"))),g(x.a,{id:"3443765449"},[".profile.jsx-3443765449 h4.jsx-3443765449{font-size:24px;font-weight:bold;margin-bottom:30px;}",".profile-details.jsx-3443765449{padding:10px;}"]))}}],[{key:"getInitialProps",value:function(){var t=Object(r.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.makeRequest("get","/api/profile");case 2:return t.t0=t.sent,t.next=5,v.a.makeRequest("get","/api/profile/balance");case 5:return t.t1=t.sent,t.abrupt("return",{profile:t.t0,balance:t.t1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),a}(m.a.Component);e.default=y},jZJi:function(t,e,a){"use strict";var n=a("o0o1"),s=a.n(n),r=a("HaE+"),o=a("1OyB"),i=a("vuIU"),c=a("vcXL"),l=a.n(c),u=a("iZ4v"),p=a.n(u),d=function(){function t(){Object(o.a)(this,t),this.token="",this.context=null,this.protocol="http:",this.port=null}return Object(i.a)(t,[{key:"setToken",value:function(t){p.a.log("APIclient.setToken",t),this.token=t}},{key:"setContext",value:function(t){p.a.log("APIclient.setContext"),this.context=t}},{key:"detectContext",value:function(){this.host=window.location.hostname,this.protocol=window.location.protocol,this.port=window.location.port}},{key:"makeRequest",value:function(){var t=Object(r.a)(s.a.mark((function t(e,a,n){var r,o,i,c,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.detectContext(),r=n||{},o=this.getBaseUrl(),i=o+a,p.a.log("APIclient.makeRequest.requestUrl",i,this.token),t.prev=5,t.next=8,l()(i,{credentials:"include",headers:{"content-type":"post"==e?"application/json":"",Authorization:this.token?"Bearer ".concat(this.token):""},method:e,body:"post"==e?JSON.stringify(r):null});case 8:if(!(c=t.sent).ok){t.next=15;break}return t.next=12,c.json();case 12:return t.abrupt("return",t.sent);case 15:return t.next=17,c.text();case 17:throw u=t.sent,p.a.log("APIclient.makeRequest.response.notOkay",c.statusText,u),new Error(c.statusText);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),p.a.log("APIclient.makeRequest.error",t.t0);case 25:case"end":return t.stop()}}),t,this,[[5,22]])})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"getBaseUrl",value:function(){return"".concat(this.protocol,"//").concat(this.host).concat(this.port?":"+this.port:"")}}]),t}();e.a=new d},vcXL:function(t,e,a){"use strict";var n=self.fetch.bind(self);t.exports=n,t.exports.default=t.exports}},[["8QMV",1,2,0,3,4]]]);